<!DOCTYPE HTML>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/extras/spring-security">

<head>
    <title>Marketplace Registration</title>
    <meta charset="UTF-8">
    <meta content="The site was developed by student Balaian Vardan" name="description">
    <meta content="en" http-equiv="content-language">
    <meta content="Vardan Balaian" name="author">
    <meta content="copyright held by Balaian Vardan" name="copyright">

    <link type="text/css" rel="stylesheet" th:href="@{/css/element_styles.css}" href="../static/css/element_styles.css" >
    <link type="text/css" rel="stylesheet" th:href="@{/css/text_styles.css}" href="../static/css/text_styles.css" >
    <link type="text/css" rel="stylesheet" th:href="@{/css/hover_styles.css}" href="../static/css/hover_styles.css" >
    <link type="text/css" rel="stylesheet" th:href="@{/css/modal_style.css}" href="../static/css/modal_style.css">

    <script type="text/javascript" th:src="@{/js/registration_form_validation.js}" src="../static/js/registration_form_validation.js"></script>
    <script type="text/javascript" th:src="@{/js/elements_change.js}" src="../static/js/elements_change.js"></script>
</head>

<body>

<h1 class="site_name_decor">Online MarketPlace</h1>

<!--<c:if test="${sessionScope.loggedUser==null && sessionScope.guestMod==null}">
    <a class="navigation_link" href="product_table">Auction table</a>
</c:if>

<c:if test="${sessionScope.loggedUser!=null}">
    <a class="navigation_link" href="product_table">Auction table</a>
</c:if>

<c:if test="${sessionScope.guestMod}">
    <a class="navigation_link" href="guest_product_table">Auction table</a>
</c:if>-->

<a class="navigation_link" th:href="@{/}">Homepage</a>
<a class="navigation_link" th:href="@{/login}">Log in</a>

<div class="content">

    <th:block sec:authorize="isAuthenticated()">
    <div class="logout_form">
            <span class="user_name_display" sec:authentication="name"></span>
            <a class="logout_link" th:href="@{/product_table}">Return to table</a>
            <form th:action="@{/logout}" method="post">
                <input class="logout_link" type="submit" value="Sign Out"/>
            </form>
    </div>
    </th:block>


    <form th:object="${user}" th:action="@{/registration}"  name="register_form" autocomplete="on" method="post">

        <fieldset>

            <legend class="legend_text">
                Registration form
            </legend>


            <div class="login_panel">

                <th:block sec:authorize="isAnonymous()">

                    <p>
                        <label class="label_input" for="login">
                            Login:
                            <input class="user_data_input" id="login" maxlength="20" minlength="4"
                                   name="loginName" pattern="^[a-zA-Z][a-zA-Z0-9-_\.]{3,20}$"
                                   placeholder="Create a username" required title="Use 4-20 Latin characters. Only letters, numbers, hyphens and underscores are allowed. The first character must be a letter."
                                   type="text"
                            />
                        </label>
                    </p>

                    <p>
                        <label class="label_input" for="password">
                            Password:
                            <input class="user_data_input" id="password" maxlength="20"
                                   minlength="6" name="password" pattern="^[a-zA-Z0-9_-]{6,20}$"
                                   placeholder="Create a password" required
                                   title="Use 6-20 Latin characters. Only letters, numbers, hyphens and underscores are allowed."
                                   type="password"
                            />
                        </label>
                    </p>

                    <p>
                        <label class="label_input" for="password_replay">
                            Confirm password:
                            <input class="user_data_input" id="password_replay" maxlength="12"
                                   minlength="6" name="password_replay" pattern="^[a-zA-Z0-9_-]{6,20}$"
                                   placeholder="Re-enter Password" required
                                   title="Use 6-20 Latin characters. Only letters, numbers, hyphens and underscores are allowed."
                                   type="password"
                            />
                        </label>
                    </p>

                    <p>
                        <label class="label_input" for="fullName">
                            Full name:
                            <input class="user_data_input" id="fullName" maxlength="40" minlength="2"
                                   name="fullName"
                                   pattern="^[A-Z][a-zA-Z\-]{1,20}\s[A-Z][a-zA-Z\-]{1,20}(\s[A-Z][a-zA-Z\-]{1,20})?$"
                                   placeholder="Enter Full name" required title="Use 2-40 Latin characters. Only letters and hyphens are allowed. The first letter of each word is uppercase."
                                   type="text"
                            />
                        </label>
                    </p>

                    <p>
                        <label class="label_input" for="city">
                            City:
                            <input class="user_data_input" id="city" list="cities" maxlength="30"
                                   minlength="2" name="city" pattern="^[a-zA-Z]+(?:[- `][a-zA-Z]+)*$"
                                   placeholder="Enter city" required title="Use 2-30 Latin characters. Only letters and hyphens are allowed."
                                   type="text"
                            />
                            <datalist id="cities">
                                <option value="Salekhard"></option>
                                <option value="Samara"></option>
                                <option value="Saint Petersburg"></option>
                                <option value="Saransk"></option>
                                <option value="Smolensk"></option>
                                <option value="Sochi"></option>
                                <option value="Stavropol"></option>
                                <option value="Syktyvkar"></option>
                                <option value="Arkhangelsk"></option>
                                <option value="Astrakhan"></option>
                                <option value="Belgorod"></option>
                                <option value="Bryansk"></option>
                                <option value="Vladimir"></option>
                                <option value="Volgograd"></option>
                                <option value="Voronezh"></option>
                                <option value="Ivanovo"></option>
                                <option value="Izhevsk"></option>
                                <option value="Irkutsk"></option>
                                <option value="Kazan"></option>
                                <option value="Kaliningrad"></option>
                                <option value="Kaluga"></option>
                                <option value="Kemerovo"></option>
                                <option value="Kislovodsk"></option>
                                <option value="Krasnodar"></option>
                                <option value="Krasnoyarsk"></option>
                                <option value="Kursk"></option>
                                <option value="Lipetsk"></option>
                                <option value="Magadan"></option>
                                <option value="Maykop"></option>
                                <option value="Moscow"></option>
                                <option value="Murmansk"></option>
                                <option value="Nizhnevartovsk"></option>
                                <option value="Nizhny Novgorod"></option>
                                <option value="Novosibirsk"></option>
                                <option value="Novye Burasy"></option>
                                <option value="Omsk"></option>
                                <option value="Orenburg"></option>
                                <option value="Oryol"></option>
                                <option value="Penza"></option>
                                <option value="Perm"></option>
                                <option value="Petrozavodsk"></option>
                                <option value="Petropavlovsk-Kamchatsky"></option>
                                <option value="Podolsk"></option>
                                <option value="Pskov"></option>
                                <option value="Pyatigorsk"></option>
                                <option value="Rostov-on-Don"></option>
                                <option value="Ryazan"></option>
                                <option value="Tver"></option>
                                <option value="Tobolsk"></option>
                                <option value="Tyumen"></option>
                                <option value="Ulyanovsk"></option>
                                <option value="Ufa"></option>
                                <option value="Khabarovsk"></option>
                                <option value="Chelyabinsk"></option>
                                <option value="Cheboksary"></option>
                                <option value="Engels"></option>
                                <option value="Yakutsk"></option>
                                <option value="Yaroslavl"></option>
                            </datalist>
                        </label>
                    </p>

                    <p>
                        <label class="label_input" for="email">
                            Email:
                            <input class="user_data_input" id="email" name="email" minlength="2" maxlength="40"
                                   pattern="^[_a-zA-Z0-9-\+-]+(\.[_a-zA-Z0-9-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*(\.[a-zA-Z]{2,20})$"
                                   placeholder="Enter email"
                                   required title="someone@example.com"
                                   type="email"
                            />

                        </label>
                    </p>

                    <p>
                        <label class="label_input" for="phone">
                            Phone number:
                            <input class="user_data_input" id="phone" maxlength="12" name="phoneNumber"
                                   pattern="^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$"
                                   placeholder="Enter phone number"
                                   required title="+7(XXX) XXX XXXX"
                                   type="tel"
                            />
                        </label>
                    </p>

                        <span class="error_form" th:utext="${userExistsMessage}"></span>

                    <hr>

                    <p class="button_bar">
                            <button class="registration-button" type="submit" id="dataSendButton">To register</button>
                            <button class="registration-button" type="reset">Reset forms</button>
                        </th:block>

                        <th:block sec:authorize="isAuthenticated()">
                            <span class="error_form">To register a new user, first log out of the current user</span>
                        </th:block>

                    </p>

                </div>

        </fieldset>

    </form>

</div>

<footer class="footer"><p class="footer_text">Developed by student Balaian Vardan Ⓢ 2020</p>
</footer>

<!-- The Modal -->
<div class="modal" id="wrongFillingModal">
    <!-- Modal content -->
    <div class="modal-content">
        <span class="close">&times;</span>
        <p id="wrongMessage">There are errors in filling out the form.</p>


        <div class="modal-footer">
            <button class="registration-button" id="exitButton" type="button">Exit</button>
        </div>

    </div>
</div>

<!-- The Modal -->
<div class="modal" id="warningModal">
    <!-- Modal content -->
    <div class="modal-content">
        <span class="close">&times;</span>
        <p id="warningMessage">"By creating a profile, you consent to the processing of personal data."</p>

        <div class="modal-footer">
            <button class="registration-button" id="confirmButton" type="button">OK</button>
            <button class="registration-button" id="negativeButton" type="button">Cancel</button>
        </div>

    </div>
</div>
</body>

</html>
